//>>built
define("gridx/modules/extendedSelect/Column","dojo/_base/declare dojo/_base/array dojo/_base/event dojo/query dojo/_base/lang dojo/_base/sniff dojo/dom-class dojo/mouse dojo/keys ../../core/_Module ./_Base".split(" "),function(p,f,q,l,r,s,k,t,g,v,u){return p(u,{name:"selectColumn",columnMixin:{select:function(){this.grid.select.column.selectById(this.id);return this},deselect:function(){this.grid.select.column.deselectById(this.id);return this},isSelected:function(){return!!this.grid._columnsById[this.id]._selected}},
getSelected:function(){return f.map(f.filter(this.grid._columns,function(b){return b._selected}),function(b){return b.id})},clear:function(b){l(".gridxColumnSelected",this.grid.domNode).forEach(function(a){k.remove(a,"gridxColumnSelected");a.removeAttribute("aria-selected")});f.forEach(this.grid._columns,function(a){a._selected=0});this._clear();b||this._onSelectionChange()},isSelected:function(){var b=this.grid._columnsById;return f.every(arguments,function(a){return(a=b[a])&&a._selected})},_type:"column",
_markById:function(b,a){f.forEach(b,function(b){if(b=this.grid._columnsById[b])b._selected=a,this._doHighlight({column:b.index},a)},this)},_markByIndex:function(b,a){var c,e,f=this.grid._columns;for(c=0;c<b.length;++c){var d=b[c];if(r.isArrayLike(d)){var h=d[0],d=d[1];if(0<=h&&Infinity>h)for(d>=h&&Infinity>d||(d=f.length-1);h<d+1;++h)if(e=f[h])e._selected=a,this._doHighlight({column:e.index},a)}else if(0<=d&&Infinity>d&&(e=f[d]))e._selected=a,this._doHighlight({column:d},a)}},_init:function(){var b=
this,a=b.grid;b.batchConnect([a,"onHeaderCellMouseDown",function(c){t.isLeft(c)&&!k.contains(c.target,"gridxArrowButtonNode")&&(b._start({column:c.columnIndex},a._isCtrlKey(c),c.shiftKey),!c.shiftKey&&!b.arg("canSwept")&&b._end())}],[a,"onHeaderCellMouseOver",function(a){b._highlight({column:a.columnIndex})}],[a,"onCellMouseOver",function(a){b._highlight({column:a.columnIndex})}],[a,4>s("ff")?"onHeaderCellKeyUp":"onHeaderCellKeyDown",function(c){if((c.keyCode==g.SPACE||c.keyCode==g.ENTER)&&!k.contains(c.target,
"gridxArrowButtonNode"))q.stop(c),b._start({column:c.columnIndex},a._isCtrlKey(c),c.shiftKey),b._end()}],[a.header,"onMoveToHeaderCell","_onMoveToHeaderCell"])},_onRender:function(b,a){var c,e,g=b+a,d=this.grid,h=d.bodyNode,m,n=f.filter(d._columns,function(a){return a._selected});for(c=n.length-1;0<=c;--c)for(e=b;e<g;++e)m=l(['[visualindex\x3d"',e,'"] [colid\x3d"',d._escapeId(n[c].id),'"]'].join(""),h)[0],k.add(m,"gridxColumnSelected"),m.setAttribute("aria-selected",!0)},_onMoveToHeaderCell:function(b,
a){if(a.shiftKey&&(a.keyCode==g.LEFT_ARROW||a.keyCode==g.RIGHT_ARROW))this._start({column:this.grid._columnsById[b].index},this.grid._isCtrlKey(a),1),this._end()},_isSelected:function(b){b=this.grid._columns[b.column];var a=b.id;return this._isRange?0<=f.indexOf(this._refSelectedIds,a):b._selected},_beginAutoScroll:function(){this.grid.autoScroll.vertical=!1},_endAutoScroll:function(){this.grid.autoScroll.vertical=!0},_doHighlight:function(b,a){l('[colid\x3d"'+this.grid._escapeId(this.grid._columns[b.column].id)+
'"].gridxCell',this.grid.domNode).forEach(function(b){k.toggle(b,"gridxColumnSelected",a)})},_focus:function(b){var a=this.grid;a.focus&&a.header._focusNode(l('[colid\x3d"'+a._escapeId(a._columns[b.column].id)+'"].gridxCell',a.header.domNode)[0])},_addToSelected:function(b,a,c){var e=this.grid,g;this._isRange||(this._refSelectedIds=this.getSelected());if(this._isRange&&this._inRange(a.column,b.column,this._lastEndItem.column)){b=Math.min(a.column,this._lastEndItem.column);for(a=Math.max(a.column,
this._lastEndItem.column);b<=a;++b)e._columns[b]._selected=0<=f.indexOf(this._refSelectedIds,e._columns[b].id)}else{g=Math.min(b.column,a.column);a=Math.max(b.column,a.column);for(b=g;b<=a;++b)e._columns[b]._selected=c}}})});
//# sourceMappingURL=Column.js.map