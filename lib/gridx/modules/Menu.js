//>>built
define("gridx/modules/Menu","dojo/_base/declare dojo/_base/connect ../core/_Module dojo/dom-class dojo/keys dojo/_base/event dijit/registry dijit/Menu".split(" "),function(r,f,s,n,q,t,m,u){return r(s,{name:"menu",constructor:function(){this._menus={}},context:null,bind:function(e,a){a=a||{};var b=this,c=b.grid,g=a.hookPoint&&a.hookPoint.toLowerCase()||"grid",h=a.selected?g+"-selected":g,p=b._evtMap[g],d=b._menus[h]=b._menus[h]||{},k=function(a){b._showMenu(h,a)},l=function(a){a.keyCode==q.F10&&a.shiftKey&&
b._showMenu(h,a)};f.disconnect(d.open);f.disconnect(d.keyopen);f.disconnect(d.close);d.menu=m.byId(e);p?(d.open=b.connect(c,p[0],k),d.keyopen=b.connect(c,p[1],l)):"body"==g?(d.open=b.connect(c.bodyNode,"oncontextmenu",k),d.keyopen=b.connect(c.bodyNode,"onkeydown",l)):(d.open=b.connect(c.domNode,"oncontextmenu",k),d.keyopen=b.connect(c.domNode,"onkeydown",l));d.close=b.connect(d.menu,"onClose",function(){b._mutex=0})},unbind:function(e){var a,b=this._menus,c;e=m.byId(e);for(a in b)if(c=b[a],c.menu==
e){f.disconnect(c.open);f.disconnect(c.keyopen);f.disconnect(c.close);delete b[a];break}},_evtMap:{header:["onHeaderContextMenu","onHeaderKeyDown"],headercell:["onHeaderCellContextMenu","onHeaderCellKeyDown"],cell:["onCellContextMenu","onCellKeyDown"],row:["onRowContextMenu","onRowKeyDown"]},_showMenu:function(e,a){var b=this._menus;if(!this._mutex&&b[e].menu){var c=this.grid,g=a.rowId,h=a.columnId,f=!e.indexOf("row"),d=!e.indexOf("cell"),k=!e.indexOf("headercell"),l=0<e.indexOf("-"),m=!!(d&&n.contains(a.cellNode,
"gridxCellSelected")||k&&n.contains(c.header.getHeaderNode(h),"gridxColumnSelected")||f&&n.contains(c.body.getRowNode({rowId:g}),"gridxRowSelected"));if(l==m||!l&&m&&!b[e+"-selected"])this.context={grid:c,column:k&&c.column(h,1),row:f&&c.row(g,1),cell:d&&c.cell(g,h,1)},t.stop(a),this._mutex=1,b[e].menu._openMyself({target:a.target,coords:a.keyCode!=q.F10&&"pageX"in a?{x:a.pageX,y:a.pageY}:null})}}})});
//# sourceMappingURL=Menu.js.map