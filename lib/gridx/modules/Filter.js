//>>built
define("gridx/modules/Filter","../core/_Module ../core/model/extensions/ClientFilter ../core/model/extensions/Query dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred".split(" "),function(h,n,p,q,e,f,l){function m(a,b,c){f.isFunction(c)&&(a=c(a));switch(b){case "number":return parseFloat(a,10);case "boolean":return!!a;case "date":return a=new Date(a),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.getTime();case "time":return a=new Date(a),a.setDate(1),a.setMonth(0),
a.setFullYear(2E3),a.getTime();default:return null===a||void 0===a?"":String(a)}}function d(a,b,c,d){f.isArray(c)&&(c=e.map(c,function(a){return a.expr}));return f.mixin(a,{expr:f.mixin({op:b,data:c},d||{})})}function k(a,b,c,d,g){b=String(b.apply(0,a));a=String(c.apply(0,a));d||(b=b.toLowerCase(),a=a.toLowerCase());return g(b,a)}h=q(h,{name:"filter",modelExtensions:[n,p],constructor:function(){this.setFilter(this.arg("preCondition"),1);this.aspect(this.grid.model,"setStore",function(){this._checker=
null})},serverMode:!1,caseSensitive:!1,setupQuery:function(a){return a},setFilter:function(a,b){a!=this._checker&&(this._checker=a,this.refresh(b))},clearFilter:function(){this.setFilter()},getFilter:function(){return this._checker},refresh:function(a){var b=this,c=b.grid,d=b.model,g=new l,e=b._checker;if(b.arg("serverMode")){var f=b.arg("setupFilterQuery")||b.arg("setupQuery");d.query(f.call(b,e&&e.expr))}else d.filter(e);d.clearCache();l.when(!a&&c.body.refresh(),function(){g.callback();b.onFilter()},
function(a){g.errback(a)});return g},onFilter:function(){}});return f.mixin(h,{column:function(a,b,c,e){b=String(b||"string").toLowerCase();return d(function(d){return m(d[e?"rawData":"data"][a],b,c)},b,a,{isCol:!0})},value:function(a,b,c){b=String(b||typeof a).toLowerCase();a=m(a,b,c);return d(function(){return a},b,a)},isEmpty:function(a,b){return d(function(){var c=a.apply(0,arguments);return b?0<=e.indexOf(b,c):""===c||null===c||void 0===c},"isEmpty",[a])},isNotEmpty:function(a,b){return d(function(){var c=
a.apply(0,arguments);return b?0<=e.indexOf(b,c):""!==c&&null!==c&&void 0!==c},"isNotEmpty",[a])},and:function(){var a=e.filter(arguments,function(a){return f.isFunction(a)});return d(function(){var b=arguments;return e.every(a,function(a){return a.apply(0,b)})},"and",a)},or:function(){var a=e.filter(arguments,function(a){return f.isFunction(a)});return d(function(){var b=arguments;return e.some(a,function(a){return a.apply(0,b)})},"or",a)},not:function(a){return d(function(){return!a.apply(0,arguments)},
"not",[a])},equal:function(a,b){return d(function(){return a.apply(0,arguments)===b.apply(0,arguments)},"equal",[a,b])},greater:function(a,b){return d(function(){return a.apply(0,arguments)>b.apply(0,arguments)},"greater",[a,b])},less:function(a,b){return d(function(){return a.apply(0,arguments)<b.apply(0,arguments)},"less",[a,b])},greaterEqual:function(a,b){return d(function(){return a.apply(0,arguments)>=b.apply(0,arguments)},"greaterEqual",[a,b])},lessEqual:function(a,b){return d(function(){return a.apply(0,
arguments)<=b.apply(0,arguments)},"lessEqual",[a,b])},match:function(a,b){return d(function(){return 0<=String(a.apply(0,arguments)).search(b)},"match",[a,{expr:{op:"regex",data:b}}])},contain:function(a,b,c){return d(function(){return k(arguments,a,b,c,function(a,b){return 0<=a.indexOf(b)})},"contain",[a,b])},startWith:function(a,b,c){return d(function(){return k(arguments,a,b,c,function(a,b){return a.substring(0,b.length)===b})},"startWith",[a,b])},endWith:function(a,b,c){return d(function(){return k(arguments,
a,b,c,function(a,b){return a.substring(a.length-b.length)===b})},"endWith",[a,b])}})});
//# sourceMappingURL=Filter.js.map